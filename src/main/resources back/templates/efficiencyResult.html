<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Getting Started: Handling Form Submission</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

  <link rel="stylesheet" href="/css/pieCSS.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
</head>
<style>
.axis path,
.axis line{
	fill:none;
	stroke:black;
	shape-rendering:crispEdges;
}
.axis text{
	font-family: sans-serif;
	font-size: 11px;
}
</style>
<body>
<header><div th:replace="fragments/header :: header">Header</div></header>
	<h1>Efficiency Gap Result</h1>
	<form action="#" th:action="@{/gerrymander}" th:object="${resultPane}" method="post">
		<div style="float: left;" th:replace="demoPieFrag :: demoPieFrag"></div>
	    <div style="float: right;" th:replace="racePieFrag :: racePieFrag"></div>
		<p th:text="'State Name: ' + ${resultPane.state.stateName}" />
		<p th:text="'Year: ' + ${resultPane.state.year}" />
		<p th:text="'Efficiency Gap Result: ' + ${resultPane.efficiencyGap.result}" />
		<p th:text="'Efficiency Gap Explaination: ' + ${resultPane.efficiencyGap.efficiencyExplain}" />
    </form>
    <P></P>
    <P></P>
    <P></P>
    <P></P>
    <form action="#" th:action="@{/gerrymander}" th:object="${resultPane}" method="post">
		 <p th:text="'1 for Democrats, 2 for Republicans'" />
		 <P></P>
    	<P></P>
    </form>
	  	<!-- // <script src="d3/d3.js" charset="utf-8"></script> -->
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script>

var width=400;
var height=400;
var dataset=[[1, Math.random()*1],[1, Math.random()*1],[1, Math.random()*1],
    [2, Math.random()*1],[2, Math.random()*1],[2, Math.random()*1],
    [2, Math.random()*1],[1, Math.random()*1],[1, Math.random()*1],[2, Math.random()*1],
    [2, Math.random()*1],[1, Math.random()*1],[1, Math.random()*1]];
var padding={left:30, right:30, top:30, bottom:30};
var svg=d3.select("body")
			.append("svg")
			.attr("width",width)
			.attr("height",height);

var xScale=d3.scale.linear()
				.domain([0,3])
				.range([0,500]);

var yScale=d3.scale.linear()
				.domain([0,1.2*d3.max(dataset,function(d){
					return d[1];
				})])
				.range([height-padding.top-padding.bottom,0]);

var circle=svg.selectAll("circle")
				.data(dataset)
				.enter()
				.append("circle")
				.attr("fill","black")
				.attr("cx",function(d){
					return padding.left+xScale(d[0]);
				})
				.attr("cy",function(d){
					
					console.log(yScale(d[1]));
					return yScale(d[1])+padding.bottom;
				})
				.attr("r",5);


var xAxis=d3.svg.axis()
			.scale(xScale)
			.orient("bottom");

var yAxis=d3.svg.axis()
			.scale(yScale)
			.orient("left");

svg.append("g")
	.attr("class","axis")
	.attr("transform","translate("+padding.left+","+(height-padding.bottom)+")")
	.call(xAxis);

svg.append("g")
	.attr("class","axis")
	.attr("transform","translate("+padding.left+","+padding.top+")")
	// .attr("transform","translate("+padding.left+(height-padding.bottom-yAxisWidth)+")")
	.call(yAxis);


</script>
    <form class = "login-register-group" action="gerrymander.html">
		<input  class="btn btn-primary block full-width m-b" type="submit" value="Gerrymander Test" />
	  </form>
	  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

 	<script  src="/js/pieJS.js"></script>
	  
    
</body>
</html>